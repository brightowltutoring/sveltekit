import{S as we,i as Se,s as ve,k as c,a as y,q as P,l as d,m as w,c as v,r as U,h as u,n as s,p as V,b as _e,N as i,G as j,t as ge,d as Ee,f as ue,C as ke,R as te,o as Ie,O as me,D as Le,P as Te,Q as Fe,A as be,g as Be,T as K}from"../../../chunks/index-1063d0c6.js";import{r as pe,a as he,i as ie}from"../../../chunks/store-817eb231.js";import{e as Re,s as Oe}from"../../../chunks/index-0fa359d1.js";import{i as Ae,s as De,o as Ne,a as M,G as le,b as Pe,e as Ue,y as Me,R as We,c as Ce,d as He}from"../../../chunks/firebase-b06eb9de.js";import{g as fe}from"../../../chunks/navigation-5c5c4afd.js";import"../../../chunks/index-6dbc7447.js";import"../../../chunks/private-2f12c45b.js";import"../../../chunks/singletons-55026501.js";function ye(n){let l,t,_,S;return{c(){l=c("input"),this.h()},l(o){l=d(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){s(l,"id","emailField"),s(l,"type","email"),s(l,"placeholder","email"),s(l,"class","svelte-1lkingg")},m(o,m){_e(o,l,m),me(l,n[0]),_||(S=[j(l,"input",n[6]),j(l,"input",function(){Le(n[2](n[0]))&&n[2](n[0]).apply(this,arguments)})],_=!0)},p(o,m){n=o,m&1&&l.value!==n[0]&&me(l,n[0])},i(o){o&&(t||Te(()=>{t=Fe(l,Oe,{duration:500,easing:Re}),t.start()}))},o:be,d(o){o&&u(l),_=!1,ke(S)}}}function Ge(n){let l,t,_,S,o,m,p,W,C,H,G,q,O,E,z,e,r=n[1],k,I,A,b,D,g,R,Q,x,N,J,X,T,Y,Z,F,$,ee,se,h=ye(n);return{c(){l=c("main"),t=c("div"),_=c("br"),S=y(),o=c("br"),m=y(),p=c("button"),W=P("Sign-in with Google"),C=y(),H=c("br"),G=y(),q=c("br"),O=y(),E=c("button"),z=P("Sign-in via link"),e=y(),h.c(),k=y(),I=c("span"),A=y(),b=c("span"),D=y(),g=c("div"),R=c("h2"),Q=P("Welcome User"),x=y(),N=c("h3"),J=P("Redirecting to your page in"),X=y(),T=c("h3"),Y=P("\u230A\u03C0\u230B"),Z=y(),F=c("button"),$=P("Logout"),this.h()},l(f){l=d(f,"MAIN",{});var L=w(l);t=d(L,"DIV",{class:!0,id:!0,style:!0});var a=w(t);_=d(a,"BR",{}),S=v(a),o=d(a,"BR",{}),m=v(a),p=d(a,"BUTTON",{id:!0,class:!0});var ne=w(p);W=U(ne,"Sign-in with Google"),ne.forEach(u),C=v(a),H=d(a,"BR",{}),G=v(a),q=d(a,"BR",{}),O=v(a),E=d(a,"BUTTON",{id:!0,class:!0});var oe=w(E);z=U(oe,"Sign-in via link"),oe.forEach(u),e=v(a),h.l(a),k=v(a),I=d(a,"SPAN",{id:!0,class:!0,style:!0}),w(I).forEach(u),A=v(a),b=d(a,"SPAN",{id:!0,style:!0,class:!0}),w(b).forEach(u),a.forEach(u),D=v(L),g=d(L,"DIV",{class:!0,id:!0,style:!0});var B=w(g);R=d(B,"H2",{class:!0,id:!0});var ae=w(R);Q=U(ae,"Welcome User"),ae.forEach(u),x=v(B),N=d(B,"H3",{class:!0});var re=w(N);J=U(re,"Redirecting to your page in"),re.forEach(u),X=v(B),T=d(B,"H3",{class:!0,style:!0,id:!0});var ce=w(T);Y=U(ce,"\u230A\u03C0\u230B"),ce.forEach(u),Z=v(B),F=d(B,"BUTTON",{id:!0,class:!0});var de=w(F);$=U(de,"Logout"),de.forEach(u),B.forEach(u),L.forEach(u),this.h()},h(){s(p,"id","googleBtn"),s(p,"class","svelte-1lkingg"),s(E,"id","passwordlessLoginBtn"),s(E,"class","svelte-1lkingg"),s(I,"id","emailStatusMessage"),s(I,"class","centering  svelte-1lkingg"),V(I,"display","none"),s(b,"id","flyingEmoji"),V(b,"display","none"),s(b,"class","svelte-1lkingg"),s(t,"class","loginLogoutDivs  svelte-1lkingg"),s(t,"id","logInDiv"),V(t,"display","block"),s(R,"class","centering svelte-1lkingg"),s(R,"id","loginWelcomeText"),s(N,"class","centering svelte-1lkingg"),s(T,"class","centering svelte-1lkingg"),V(T,"font-size","30px"),s(T,"id","redirectMessage"),s(F,"id","logoutBtn"),s(F,"class","svelte-1lkingg"),s(g,"class","loginLogoutDivs svelte-1lkingg"),s(g,"id","logOutDiv"),V(g,"display","none")},m(f,L){_e(f,l,L),i(l,t),i(t,_),i(t,S),i(t,o),i(t,m),i(t,p),i(p,W),i(t,C),i(t,H),i(t,G),i(t,q),i(t,O),i(t,E),i(E,z),i(t,e),h.m(t,null),i(t,k),i(t,I),i(t,A),i(t,b),i(l,D),i(l,g),i(g,R),i(R,Q),i(g,x),i(g,N),i(N,J),i(g,X),i(g,T),i(T,Y),i(g,Z),i(g,F),i(F,$),ee||(se=[j(p,"click",n[3]),j(E,"click",n[5]),j(F,"click",n[4])],ee=!0)},p(f,[L]){L&2&&ve(r,r=f[1])?(Be(),ge(h,1,1,be),Ee(),h=ye(f),h.c(),ue(h,1),h.m(t,k)):h.p(f,L)},i(f){ue(h)},o(f){ge(h)},d(f){f&&u(l),h.d(f),ee=!1,ke(se)}}}function qe(n,l,t){let _,S,o;te(n,pe,e=>t(7,_=e)),te(n,he,e=>t(8,S=e)),te(n,ie,e=>t(9,o=e));let m="",p=!1;Ie(()=>{if(Ae(M,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),De(M,e,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(r=>console.log(r))}Ne(M,e=>{e?(K(ie,o=!0,o),console.log("User is signed in!"),q(e.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=e.displayName?`Hey ${e.displayName}!`:`Hey ${e.email}!`):(K(ie,o=!1,o),console.log("User is NOT signed in"))})});function W(e){const r=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);e==""?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):r?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>O()),emailField.addEventListener("keydown",k=>{k.key==="Enter"&&O()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function C(){const e=new le;Pe(M,e).then(r=>{le.credentialFromResult(r).accessToken,r.user}).catch(r=>{r.code,r.message,r.customData.email,le.credentialFromError(r)})}function H(){let e=emailField.value;console.log(e),e.length!==0&&Ce(M,e,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",e),console.log("success with sendSignInLinkToEmail!")}).catch(k=>{k.code,k.message,console.log("error with sendSignInLinkToEmail")})}function G(){Ue(M).then(()=>{console.log("logged out"),fe("/")}).catch(e=>{console.log(e),console.log("FAILED firebase signOut function")})}async function q(e){const r=Me(He,"email");(await We(r)).forEach(I=>{if(e===I.id){let A=3e3,b=parseInt(A/1e3),D="/";console.log(`A match! ${I.id} => ${D}`),K(he,S=setInterval(()=>{b>0&&(b+=-1,document.getElementById("redirectMessage").innerHTML=` ${b}`)},1e3),S),K(pe,_=setTimeout(()=>{fe(D)},A),_)}})}function O(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",H(),window.addEventListener("keydown",e=>e.stopImmediatePropagation(),!0),window.addEventListener("click",e=>e.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const E=()=>{m==""&&t(1,p=!p)};function z(){m=this.value,t(0,m)}return[m,p,W,C,G,E,z]}class Ye extends we{constructor(l){super(),Se(this,l,qe,Ge,ve,{})}}export{Ye as default};
