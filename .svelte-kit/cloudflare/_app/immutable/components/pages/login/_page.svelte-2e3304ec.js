import{S as we,i as Ee,s as ye,k as c,a as p,q as U,l as d,m as v,h as m,c as h,r as M,n,_ as ke,p as u,b as ve,F as t,G as x,t as ue,d as Se,f as ge,C as _e,E as Ie,o as Le,$ as me,D as Fe,I as Te,J as Be,A as be,g as De,K as Oe}from"../../../chunks/index-c9f4976c.js";import{p as Re,t as Ae,o as Ne,r as pe,n as W,G as le,u as Pe,v as Ue,g as he,y as Me,R as We,e as Ce,b as He,x as ze,z as Ge}from"../../../chunks/firebase-0761f3f8.js";import"../../../chunks/singletons-1b6351c9.js";function fe(o){let s,l,E,_;return{c(){s=c("input"),this.h()},l(e){s=d(e,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){n(s,"id","emailField"),n(s,"type","email"),n(s,"placeholder","email"),n(s,"class","svelte-m7g9u3")},m(e,I){ve(e,s,I),me(s,o[0]),E||(_=[x(s,"input",o[6]),x(s,"input",function(){Fe(o[2](o[0]))&&o[2](o[0]).apply(this,arguments)})],E=!0)},p(e,I){o=e,I&1&&s.value!==o[0]&&me(s,o[0])},i(e){e&&(l||Te(()=>{l=Be(s,He,{duration:500,easing:Ce}),l.start()}))},o:be,d(e){e&&m(s),E=!1,_e(_)}}}function $e(o){let s,l,E,_,e,I,C,H,z,k,A,G,$,i,a,S,b,N,B,q=o[1],V,D,j,O,K,g,R,J,Q,P,X,Y,L,Z,ee,F,te,ie,se,f=fe(o);return{c(){s=c("main"),l=c("video"),_=p(),e=c("div"),I=c("br"),C=p(),H=c("br"),z=p(),k=c("button"),A=U("Sign-in with Google"),G=p(),$=c("br"),i=p(),a=c("br"),S=p(),b=c("button"),N=U("Sign-in via link"),B=p(),f.c(),V=p(),D=c("span"),j=p(),O=c("span"),K=p(),g=c("div"),R=c("h2"),J=U("Welcome User"),Q=p(),P=c("h3"),X=U("Redirecting to your page in"),Y=p(),L=c("h3"),Z=U("\u230A\u03C0\u230B"),ee=p(),F=c("button"),te=U("Logout"),this.h()},l(y){s=d(y,"MAIN",{});var w=v(s);l=d(w,"VIDEO",{controlslist:!0,src:!0,style:!0}),v(l).forEach(m),_=h(w),e=d(w,"DIV",{class:!0,id:!0,style:!0});var r=v(e);I=d(r,"BR",{}),C=h(r),H=d(r,"BR",{}),z=h(r),k=d(r,"BUTTON",{id:!0,class:!0});var ne=v(k);A=M(ne,"Sign-in with Google"),ne.forEach(m),G=h(r),$=d(r,"BR",{}),i=h(r),a=d(r,"BR",{}),S=h(r),b=d(r,"BUTTON",{id:!0,class:!0});var oe=v(b);N=M(oe,"Sign-in via link"),oe.forEach(m),B=h(r),f.l(r),V=h(r),D=d(r,"SPAN",{id:!0,class:!0,style:!0}),v(D).forEach(m),j=h(r),O=d(r,"SPAN",{id:!0,style:!0,class:!0}),v(O).forEach(m),r.forEach(m),K=h(w),g=d(w,"DIV",{class:!0,id:!0,style:!0});var T=v(g);R=d(T,"H2",{class:!0,id:!0});var ae=v(R);J=M(ae,"Welcome User"),ae.forEach(m),Q=h(T),P=d(T,"H3",{class:!0});var re=v(P);X=M(re,"Redirecting to your page in"),re.forEach(m),Y=h(T),L=d(T,"H3",{class:!0,style:!0,id:!0});var ce=v(L);Z=M(ce,"\u230A\u03C0\u230B"),ce.forEach(m),ee=h(T),F=d(T,"BUTTON",{id:!0,class:!0});var de=v(F);te=M(de,"Logout"),de.forEach(m),T.forEach(m),w.forEach(m),this.h()},h(){l.autoplay=!0,l.loop=!0,l.muted=!0,l.playsInline=!0,n(l,"controlslist","nodownload"),ke(l.src,E="/login-bg-video-blurred.mp4")||n(l,"src",E),u(l,"min-height","90vh"),u(l,"max-height","90vh"),u(l,"min-width","100vw"),u(l,"max-width","100vw"),u(l,"position","absolute"),u(l,"z-index","-1"),u(l,"top","0"),u(l,"left","0"),u(l,"margin","0"),u(l,"padding","0"),u(l,"filter","blur(10px)"),n(k,"id","googleBtn"),n(k,"class","svelte-m7g9u3"),n(b,"id","passwordlessLoginBtn"),n(b,"class","svelte-m7g9u3"),n(D,"id","emailStatusMessage"),n(D,"class","centering  svelte-m7g9u3"),u(D,"display","none"),n(O,"id","flyingEmoji"),u(O,"display","none"),n(O,"class","svelte-m7g9u3"),n(e,"class","loginLogoutDivs  svelte-m7g9u3"),n(e,"id","logInDiv"),u(e,"display","block"),n(R,"class","centering svelte-m7g9u3"),n(R,"id","loginWelcomeText"),n(P,"class","centering svelte-m7g9u3"),n(L,"class","centering svelte-m7g9u3"),u(L,"font-size","30px"),n(L,"id","redirectMessage"),n(F,"id","logoutBtn"),n(F,"class","svelte-m7g9u3"),n(g,"class","loginLogoutDivs svelte-m7g9u3"),n(g,"id","logOutDiv"),u(g,"display","none")},m(y,w){ve(y,s,w),t(s,l),t(s,_),t(s,e),t(e,I),t(e,C),t(e,H),t(e,z),t(e,k),t(k,A),t(e,G),t(e,$),t(e,i),t(e,a),t(e,S),t(e,b),t(b,N),t(e,B),f.m(e,null),t(e,V),t(e,D),t(e,j),t(e,O),t(s,K),t(s,g),t(g,R),t(R,J),t(g,Q),t(g,P),t(P,X),t(g,Y),t(g,L),t(L,Z),t(g,ee),t(g,F),t(F,te),ie||(se=[x(k,"click",o[3]),x(b,"click",o[5]),x(F,"click",o[4])],ie=!0)},p(y,[w]){w&2&&ye(q,q=y[1])?(De(),ue(f,1,1,be),Se(),f=fe(y),f.c(),ge(f,1),f.m(e,V)):f.p(y,w)},i(y){ge(f)},o(y){ue(f)},d(y){y&&m(s),f.d(y),ie=!1,_e(se)}}}function qe(o,s,l){let E;Ie(o,pe,i=>l(7,E=i));let _="",e=!1;Le(()=>{if(Re(W,window.location.href)){let i=window.localStorage.getItem("emailForSignIn");i||(i=window.prompt("Please provide your email for confirmation")),Ae(W,i,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(a=>console.log(a))}Ne(W,i=>{i?(console.log("User is signed in!"),k(i.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=i.displayName?`Hey ${i.displayName}!`:`Hey ${i.email}!`):console.log("User is NOT signed in")})});function I(i){const a=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i);i.length===0?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):a?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>A()),emailField.addEventListener("keydown",S=>{S.key==="Enter"&&A()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function C(){const i=new le;Pe(W,i).then(a=>{le.credentialFromResult(a).accessToken,a.user}).catch(a=>{a.code,a.message,a.customData.email,le.credentialFromError(a)})}function H(){let i=emailField.value;console.log(i),i.length!==0&&ze(W,i,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",i),console.log("success with sendSignInLinkToEmail!")}).catch(S=>{S.code,S.message,console.log("error with sendSignInLinkToEmail")})}function z(){Ue(W).then(()=>{console.log("logged out"),he("/")}).catch(i=>{console.log(i),console.log("FAILED firebase signOut function")})}async function k(i){const a=Me(Ge,"email");(await We(a)).forEach(b=>{if(i===b.id){let N=3e3,B=parseInt(N/1e3),q="/";console.log(`A match! ${b.id} => ${q}`),setInterval(()=>{B>0&&(B+=-1,document.getElementById("redirectMessage").innerHTML=` ${B}`)},1e3),Oe(pe,E=setTimeout(()=>{he(q)},N),E)}})}function A(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",H(),window.addEventListener("keydown",i=>i.stopImmediatePropagation(),!0),window.addEventListener("click",i=>i.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const G=()=>{_.length==0&&l(1,e=!e)};function $(){_=this.value,l(0,_)}return[_,e,I,C,z,G,$]}class Ke extends we{constructor(s){super(),Ee(this,s,qe,$e,ye,{})}}export{Ke as default};
