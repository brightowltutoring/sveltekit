import{S as ke,i as Ee,s as ye,k as r,a as h,q as A,l as d,m as p,h as m,c as f,r as M,n,W as Se,p as u,b as _e,F as e,J as x,t as ge,d as Ie,f as he,C as be,o as Le,X as pe,D as Fe,K as Te,L as Be,A as we,g as De}from"../../../chunks/index-0251ac3a.js";import{i as Re,c as He,o as Ne,a as W,G as ne,d as Oe,e as Pe,g as fe,y as Ue,R as Ae,b as Me,h as We,j as $e}from"../../../chunks/navigation-b42aae11.js";import{e as Ce}from"../../../chunks/index-6a4cff02.js";import"../../../chunks/singletons-6be28cf4.js";import"../../../chunks/index-ac9af0b2.js";function ve(c){let s,i,b,S;return{c(){s=r("input"),this.h()},l(l){s=d(l,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){n(s,"id","emailField"),n(s,"type","email"),n(s,"placeholder","email"),n(s,"class","svelte-1mhl4m5")},m(l,I){_e(l,s,I),pe(s,c[0]),b||(S=[x(s,"input",c[7]),x(s,"input",function(){Fe(c[2](c[0]))&&c[2](c[0]).apply(this,arguments)})],b=!0)},p(l,I){c=l,I&1&&s.value!==c[0]&&pe(s,c[0])},i(l){l&&(i||Te(()=>{i=Be(s,Me,{duration:500,easing:Ce}),i.start()}))},o:we,d(l){l&&m(s),b=!1,be(S)}}}function Ve(c){let s,i,b,S,l,I,$,O,C,w,V,q,z,j,t,a,o,k,P,D,G=c[1],K,R,J,H,X,g,N,Q,Y,U,Z,ee,L,te,le,F,ie,se,oe,v=ve(c);return{c(){s=r("main"),i=r("video"),S=h(),l=r("div"),I=r("br"),$=h(),O=r("br"),C=h(),w=r("button"),V=A("Sign-in with Google"),q=h(),z=r("br"),j=h(),t=r("br"),a=h(),o=r("div"),k=r("button"),P=A("Sign-in via link"),D=h(),v.c(),K=h(),R=r("span"),J=h(),H=r("span"),X=h(),g=r("div"),N=r("h2"),Q=A("Welcome User"),Y=h(),U=r("h3"),Z=A("Redirecting to your page in"),ee=h(),L=r("h3"),te=A("\u230A\u03C0\u230B"),le=h(),F=r("button"),ie=A("Logout"),this.h()},l(y){s=d(y,"MAIN",{});var E=p(s);i=d(E,"VIDEO",{controlslist:!0,src:!0,style:!0}),p(i).forEach(m),S=f(E),l=d(E,"DIV",{class:!0,id:!0,style:!0});var _=p(l);I=d(_,"BR",{}),$=f(_),O=d(_,"BR",{}),C=f(_),w=d(_,"BUTTON",{id:!0,class:!0});var ae=p(w);V=M(ae,"Sign-in with Google"),ae.forEach(m),q=f(_),z=d(_,"BR",{}),j=f(_),t=d(_,"BR",{}),a=f(_),o=d(_,"DIV",{id:!0});var T=p(o);k=d(T,"BUTTON",{id:!0,class:!0});var re=p(k);P=M(re,"Sign-in via link"),re.forEach(m),D=f(T),v.l(T),K=f(T),R=d(T,"SPAN",{id:!0,class:!0,style:!0}),p(R).forEach(m),J=f(T),H=d(T,"SPAN",{id:!0,style:!0,class:!0}),p(H).forEach(m),T.forEach(m),_.forEach(m),X=f(E),g=d(E,"DIV",{class:!0,id:!0,style:!0});var B=p(g);N=d(B,"H2",{class:!0,id:!0});var de=p(N);Q=M(de,"Welcome User"),de.forEach(m),Y=f(B),U=d(B,"H3",{class:!0});var ce=p(U);Z=M(ce,"Redirecting to your page in"),ce.forEach(m),ee=f(B),L=d(B,"H3",{class:!0,style:!0,id:!0});var ue=p(L);te=M(ue,"\u230A\u03C0\u230B"),ue.forEach(m),le=f(B),F=d(B,"BUTTON",{id:!0,class:!0});var me=p(F);ie=M(me,"Logout"),me.forEach(m),B.forEach(m),E.forEach(m),this.h()},h(){i.autoplay=!0,i.loop=!0,i.muted=!0,i.playsInline=!0,n(i,"controlslist","nodownload"),Se(i.src,b="/login-bg-video-blurred.mp4")||n(i,"src",b),u(i,"min-height","100vh"),u(i,"max-height","100vh"),u(i,"min-width","100vw"),u(i,"max-width","100vw"),u(i,"position","absolute"),u(i,"z-index","-1"),u(i,"top","0"),u(i,"left","0"),u(i,"margin","0"),u(i,"padding","0"),u(i,"filter","blur(10px)"),n(w,"id","googleBtn"),n(w,"class","svelte-1mhl4m5"),n(k,"id","passwordlessLoginBtn"),n(k,"class","svelte-1mhl4m5"),n(R,"id","emailStatusMessage"),n(R,"class","centering  svelte-1mhl4m5"),u(R,"display","none"),n(H,"id","flyingEmoji"),u(H,"display","none"),n(H,"class","svelte-1mhl4m5"),n(o,"id","emailSectionHover"),n(l,"class","loginLogoutDivs svelte-1mhl4m5"),n(l,"id","logInDiv"),u(l,"display","block"),n(N,"class","centering svelte-1mhl4m5"),n(N,"id","loginWelcomeText"),n(U,"class","centering svelte-1mhl4m5"),n(L,"class","centering svelte-1mhl4m5"),u(L,"font-size","30px"),n(L,"id","redirectMessage"),n(F,"id","logoutBtn"),n(F,"class","svelte-1mhl4m5"),n(g,"class","loginLogoutDivs svelte-1mhl4m5"),n(g,"id","logOutDiv"),u(g,"display","none")},m(y,E){_e(y,s,E),e(s,i),e(s,S),e(s,l),e(l,I),e(l,$),e(l,O),e(l,C),e(l,w),e(w,V),e(l,q),e(l,z),e(l,j),e(l,t),e(l,a),e(l,o),e(o,k),e(k,P),e(o,D),v.m(o,null),e(o,K),e(o,R),e(o,J),e(o,H),e(s,X),e(s,g),e(g,N),e(N,Q),e(g,Y),e(g,U),e(U,Z),e(g,ee),e(g,L),e(L,te),e(g,le),e(g,F),e(F,ie),se||(oe=[x(w,"click",c[6]),x(k,"click",c[5]),x(F,"click",c[8])],se=!0)},p(y,[E]){E&2&&ye(G,G=y[1])?(De(),ge(v,1,1,we),Ie(),v=ve(y),v.c(),he(v,1),v.m(o,K)):v.p(y,E)},i(y){he(v)},o(y){ge(v)},d(y){y&&m(s),v.d(y),se=!1,be(oe)}}}function qe(c,s,i){let b="",S=!1;Le(()=>{if(Re(W,window.location.href)){let t=window.localStorage.getItem("emailForSignIn");t||(t=window.prompt("Please provide your email for confirmation")),He(W,t,window.location.href).then(a=>{window.localStorage.removeItem("emailForSignIn")}).catch(a=>console.log(a))}Ne(W,t=>{t?(console.log("User is signed in!"),C(t.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=t.displayName?`Hey ${t.displayName}!`:`Hey ${t.email}!`):console.log("User is NOT signed in")})});function l(t){const a=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t);t.length===0?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):a?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>w()),emailField.addEventListener("keydown",o=>{o.key==="Enter"&&w()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function I(){const t=new ne;Oe(W,t).then(a=>{ne.credentialFromResult(a).accessToken,a.user}).catch(a=>{a.code,a.message,a.customData.email,ne.credentialFromError(a)})}function $(){let t=emailField.value;console.log(t),t.length!==0&&We(W,t,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",t),console.log("success with sendSignInLinkToEmail!")}).catch(o=>{o.code,o.message,console.log("error with sendSignInLinkToEmail")})}function O(){Pe(W).then(()=>{console.log("logged out"),fe("/")}).catch(t=>{console.log(t),console.log("FAILED firebase signOut function")})}async function C(t){const a=Ue($e,"email");(await Ae(a)).forEach(k=>{if(t===k.id){let P=3e3,D=parseInt(P/1e3),G="/";console.log(`A match! ${k.id} => ${G}`),setInterval(()=>{D>0&&(D+=-1,document.getElementById("redirectMessage").innerHTML=` ${D}`)},1e3),setTimeout(()=>{fe(G)},P)}})}function w(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",$(),window.addEventListener("keydown",t=>t.stopImmediatePropagation(),!0),window.addEventListener("click",t=>t.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}function V(){b.length==0&&i(1,S=!S)}const q=()=>I();function z(){b=this.value,i(0,b)}return[b,S,l,I,O,V,q,z,()=>O()]}class Je extends ke{constructor(s){super(),Ee(this,s,qe,Ve,ye,{})}}export{Je as default};
