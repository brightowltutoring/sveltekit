import{S as he,i as pe,s as ve,k as s,a as h,q as $,l as a,m as p,h as u,c as v,r as A,n as l,V as fe,p as r,b as ye,G as e,W as me,H as q,A as ge,C as we,o as _e,D as be}from"../../../chunks/index-3c293d12.js";import{o as Ee,i as Se,s as Ie,a as M,G as ne,b as ke,c as Le,y as Fe,R as Te,d as Be,e as De}from"../../../chunks/firebase-83058df2.js";function Re(m){let g,i,R,O,n,x,W,C,H,_,V,G,t,o,b,N,d,w,P,z,f,j,F,J,T,K,c,B,Q,X,U,Y,Z,S,ee,te,I,le,ie,oe;return{c(){g=s("main"),i=s("video"),O=h(),n=s("div"),x=s("br"),W=h(),C=s("br"),H=h(),_=s("button"),V=$("Sign-in with Google"),G=h(),t=s("br"),o=h(),b=s("br"),N=h(),d=s("div"),w=s("button"),P=$("Sign-in via link"),z=h(),f=s("input"),j=h(),F=s("span"),J=h(),T=s("span"),K=h(),c=s("div"),B=s("h2"),Q=$("Welcome User"),X=h(),U=s("h3"),Y=$("Redirecting to your page in"),Z=h(),S=s("h3"),ee=$("\u230A\u03C0\u230B"),te=h(),I=s("button"),le=$("Logout"),this.h()},l(D){g=a(D,"MAIN",{});var E=p(g);i=a(E,"VIDEO",{controlslist:!0,src:!0,style:!0}),p(i).forEach(u),O=v(E),n=a(E,"DIV",{class:!0,id:!0,style:!0});var y=p(n);x=a(y,"BR",{}),W=v(y),C=a(y,"BR",{}),H=v(y),_=a(y,"BUTTON",{id:!0,class:!0});var se=p(_);V=A(se,"Sign-in with Google"),se.forEach(u),G=v(y),t=a(y,"BR",{}),o=v(y),b=a(y,"BR",{}),N=v(y),d=a(y,"DIV",{id:!0});var k=p(d);w=a(k,"BUTTON",{id:!0,class:!0});var ae=p(w);P=A(ae,"Sign-in via link"),ae.forEach(u),z=v(k),f=a(k,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),j=v(k),F=a(k,"SPAN",{id:!0,class:!0,style:!0}),p(F).forEach(u),J=v(k),T=a(k,"SPAN",{id:!0,style:!0,class:!0}),p(T).forEach(u),k.forEach(u),y.forEach(u),K=v(E),c=a(E,"DIV",{class:!0,id:!0,style:!0});var L=p(c);B=a(L,"H2",{class:!0,id:!0});var re=p(B);Q=A(re,"Welcome User"),re.forEach(u),X=v(L),U=a(L,"H3",{class:!0});var de=p(U);Y=A(de,"Redirecting to your page in"),de.forEach(u),Z=v(L),S=a(L,"H3",{class:!0,style:!0,id:!0});var ce=p(S);ee=A(ce,"\u230A\u03C0\u230B"),ce.forEach(u),te=v(L),I=a(L,"BUTTON",{id:!0,class:!0});var ue=p(I);le=A(ue,"Logout"),ue.forEach(u),L.forEach(u),E.forEach(u),this.h()},h(){i.autoplay=!0,i.loop=!0,i.muted=!0,i.playsInline=!0,l(i,"controlslist","nodownload"),fe(i.src,R="/login-bg-video-blurred.mp4")||l(i,"src",R),r(i,"min-height","100vh"),r(i,"max-height","100vh"),r(i,"min-width","100vw"),r(i,"max-width","100vw"),r(i,"position","absolute"),r(i,"z-index","-1"),r(i,"top","0"),r(i,"left","0"),r(i,"margin","0"),r(i,"padding","0"),r(i,"filter","blur(10px)"),l(_,"id","googleBtn"),l(_,"class","svelte-1mhl4m5"),l(w,"id","passwordlessLoginBtn"),l(w,"class","svelte-1mhl4m5"),l(f,"id","emailField"),l(f,"type","email"),l(f,"placeholder","email"),l(f,"class","svelte-1mhl4m5"),l(F,"id","emailStatusMessage"),l(F,"class","centering  svelte-1mhl4m5"),r(F,"display","none"),l(T,"id","flyingEmoji"),r(T,"display","none"),l(T,"class","svelte-1mhl4m5"),l(d,"id","emailSectionHover"),l(n,"class","loginLogoutDivs svelte-1mhl4m5"),l(n,"id","logInDiv"),r(n,"display","block"),l(B,"class","centering svelte-1mhl4m5"),l(B,"id","loginWelcomeText"),l(U,"class","centering svelte-1mhl4m5"),l(S,"class","centering svelte-1mhl4m5"),r(S,"font-size","30px"),l(S,"id","redirectMessage"),l(I,"id","logoutBtn"),l(I,"class","svelte-1mhl4m5"),l(c,"class","loginLogoutDivs svelte-1mhl4m5"),l(c,"id","logOutDiv"),r(c,"display","none")},m(D,E){ye(D,g,E),e(g,i),e(g,O),e(g,n),e(n,x),e(n,W),e(n,C),e(n,H),e(n,_),e(_,V),e(n,G),e(n,t),e(n,o),e(n,b),e(n,N),e(n,d),e(d,w),e(w,P),e(d,z),e(d,f),me(f,m[0]),e(d,j),e(d,F),e(d,J),e(d,T),e(g,K),e(g,c),e(c,B),e(B,Q),e(c,X),e(c,U),e(U,Y),e(c,Z),e(c,S),e(S,ee),e(c,te),e(c,I),e(I,le),ie||(oe=[q(_,"click",m[4]),q(f,"input",m[5]),q(f,"input",function(){be(m[1](m[0]))&&m[1](m[0]).apply(this,arguments)}),q(I,"click",m[6])],ie=!0)},p(D,[E]){m=D,E&1&&f.value!==m[0]&&me(f,m[0])},i:ge,o:ge,d(D){D&&u(g),ie=!1,we(oe)}}}function We(m,g,i){let R;_e(()=>{Ee(M,t=>{t?(console.log("User is signed in!"),C(t.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=t.displayName?`Hey ${t.displayName}!`:`Hey ${t.email}!`):console.log("User is NOT signed in")})});function O(t){const o=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t);t.length===0?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):o?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>H()),emailField.addEventListener("keydown",b=>{b.key==="Enter"&&H()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function n(){const t=new ne;ke(M,t).then(o=>{ne.credentialFromResult(o).accessToken,o.user}).catch(o=>{o.code,o.message,o.customData.email,ne.credentialFromError(o)})}function x(){let t=emailField.value;console.log(t),t.length!==0&&Be(M,t,{url:"https://www.brightowltutoring.com/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",t),console.log("success with sendSignInLinkToEmail!")}).catch(b=>{b.code,b.message,console.log("error with sendSignInLinkToEmail")})}if(Se(M,window.location.href)){let t=window.localStorage.getItem("emailForSignIn");t||(t=window.prompt("Please provide your email for confirmation")),Ie(M,t,window.location.href).then(o=>{window.localStorage.removeItem("emailForSignIn"),console.log("signInWithEmailLink then caught")}).catch(o=>{console.log("signInWithEmailLink error caught")})}function W(){Le(M).then(()=>{console.log("logged out"),window.location.replace("/")}).catch(t=>{console.log(t),console.log("FAILED firebase signOut function")})}async function C(t){const o=Fe(De,"email");(await Te(o)).forEach(N=>{if(t===N.id){let d=3e3,w=parseInt(d/1e3),P="/";console.log(`A match! ${N.id} => ${P}`),setInterval(()=>{w>0&&(w+=-1,document.getElementById("redirectMessage").innerHTML=` ${w}`)},1e3),setTimeout(()=>{window.location.replace(P)},d)}})}function H(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",x(),window.addEventListener("keydown",t=>t.stopImmediatePropagation(),!0),window.addEventListener("click",t=>t.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const _=()=>n();function V(){R=this.value,i(0,R)}return[R,O,n,W,_,V,()=>W()]}class Pe extends he{constructor(g){super(),pe(this,g,We,Re,ve,{})}}export{Pe as default};
