import{S as we,i as Ee,s as ve,k as c,a as y,q as P,l as d,m as w,c as v,r as U,h as u,n as s,p as V,b as _e,L as i,F as j,t as ge,d as Se,f as ue,C as ke,E as te,o as Ie,$ as me,D as Le,G as Fe,H as Te,A as be,g as Be,I as K}from"../../../chunks/index-82240eb1.js";import{r as pe,a as he,d as ie}from"../../../chunks/store-593b742a.js";import{e as Re,s as Ae}from"../../../chunks/index-e66ee8b6.js";import{i as De,s as Oe,o as Ne,a as M,G as le,b as Pe,c as Ue,y as Me,R as He,e as We,d as Ce}from"../../../chunks/firebase-f2065c54.js";import{g as fe}from"../../../chunks/navigation-434dbf90.js";import"../../../chunks/index-ac42c1e3.js";import"../../../chunks/singletons-7951be46.js";function ye(n){let l,t,_,E;return{c(){l=c("input"),this.h()},l(o){l=d(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){s(l,"id","emailField"),s(l,"type","email"),s(l,"placeholder","email"),s(l,"class","svelte-1lkingg")},m(o,m){_e(o,l,m),me(l,n[0]),_||(E=[j(l,"input",n[6]),j(l,"input",function(){Le(n[2](n[0]))&&n[2](n[0]).apply(this,arguments)})],_=!0)},p(o,m){n=o,m&1&&l.value!==n[0]&&me(l,n[0])},i(o){o&&(t||Fe(()=>{t=Te(l,Ae,{duration:500,easing:Re}),t.start()}))},o:be,d(o){o&&u(l),_=!1,ke(E)}}}function Ge(n){let l,t,_,E,o,m,p,H,W,C,G,q,A,S,z,e,r=n[1],k,I,D,b,O,g,R,x,J,N,Q,X,F,Y,Z,T,$,ee,se,h=ye(n);return{c(){l=c("main"),t=c("div"),_=c("br"),E=y(),o=c("br"),m=y(),p=c("button"),H=P("Sign-in with Google"),W=y(),C=c("br"),G=y(),q=c("br"),A=y(),S=c("button"),z=P("Sign-in via link"),e=y(),h.c(),k=y(),I=c("span"),D=y(),b=c("span"),O=y(),g=c("div"),R=c("h2"),x=P("Welcome User"),J=y(),N=c("h3"),Q=P("Redirecting to your page in"),X=y(),F=c("h3"),Y=P("\u230A\u03C0\u230B"),Z=y(),T=c("button"),$=P("Logout"),this.h()},l(f){l=d(f,"MAIN",{});var L=w(l);t=d(L,"DIV",{class:!0,id:!0,style:!0});var a=w(t);_=d(a,"BR",{}),E=v(a),o=d(a,"BR",{}),m=v(a),p=d(a,"BUTTON",{id:!0,class:!0});var ne=w(p);H=U(ne,"Sign-in with Google"),ne.forEach(u),W=v(a),C=d(a,"BR",{}),G=v(a),q=d(a,"BR",{}),A=v(a),S=d(a,"BUTTON",{id:!0,class:!0});var oe=w(S);z=U(oe,"Sign-in via link"),oe.forEach(u),e=v(a),h.l(a),k=v(a),I=d(a,"SPAN",{id:!0,class:!0,style:!0}),w(I).forEach(u),D=v(a),b=d(a,"SPAN",{id:!0,style:!0,class:!0}),w(b).forEach(u),a.forEach(u),O=v(L),g=d(L,"DIV",{class:!0,id:!0,style:!0});var B=w(g);R=d(B,"H2",{class:!0,id:!0});var ae=w(R);x=U(ae,"Welcome User"),ae.forEach(u),J=v(B),N=d(B,"H3",{class:!0});var re=w(N);Q=U(re,"Redirecting to your page in"),re.forEach(u),X=v(B),F=d(B,"H3",{class:!0,style:!0,id:!0});var ce=w(F);Y=U(ce,"\u230A\u03C0\u230B"),ce.forEach(u),Z=v(B),T=d(B,"BUTTON",{id:!0,class:!0});var de=w(T);$=U(de,"Logout"),de.forEach(u),B.forEach(u),L.forEach(u),this.h()},h(){s(p,"id","googleBtn"),s(p,"class","svelte-1lkingg"),s(S,"id","passwordlessLoginBtn"),s(S,"class","svelte-1lkingg"),s(I,"id","emailStatusMessage"),s(I,"class","centering  svelte-1lkingg"),V(I,"display","none"),s(b,"id","flyingEmoji"),V(b,"display","none"),s(b,"class","svelte-1lkingg"),s(t,"class","loginLogoutDivs  svelte-1lkingg"),s(t,"id","logInDiv"),V(t,"display","block"),s(R,"class","centering svelte-1lkingg"),s(R,"id","loginWelcomeText"),s(N,"class","centering svelte-1lkingg"),s(F,"class","centering svelte-1lkingg"),V(F,"font-size","30px"),s(F,"id","redirectMessage"),s(T,"id","logoutBtn"),s(T,"class","svelte-1lkingg"),s(g,"class","loginLogoutDivs svelte-1lkingg"),s(g,"id","logOutDiv"),V(g,"display","none")},m(f,L){_e(f,l,L),i(l,t),i(t,_),i(t,E),i(t,o),i(t,m),i(t,p),i(p,H),i(t,W),i(t,C),i(t,G),i(t,q),i(t,A),i(t,S),i(S,z),i(t,e),h.m(t,null),i(t,k),i(t,I),i(t,D),i(t,b),i(l,O),i(l,g),i(g,R),i(R,x),i(g,J),i(g,N),i(N,Q),i(g,X),i(g,F),i(F,Y),i(g,Z),i(g,T),i(T,$),ee||(se=[j(p,"click",n[3]),j(S,"click",n[5]),j(T,"click",n[4])],ee=!0)},p(f,[L]){L&2&&ve(r,r=f[1])?(Be(),ge(h,1,1,be),Se(),h=ye(f),h.c(),ue(h,1),h.m(t,k)):h.p(f,L)},i(f){ue(h)},o(f){ge(h)},d(f){f&&u(l),h.d(f),ee=!1,ke(se)}}}function qe(n,l,t){let _,E,o;te(n,pe,e=>t(7,_=e)),te(n,he,e=>t(8,E=e)),te(n,ie,e=>t(9,o=e));let m="",p=!1;Ie(()=>{if(De(M,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),Oe(M,e,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(r=>console.log(r))}Ne(M,e=>{e?(K(ie,o=!0,o),console.log("User is signed in!"),q(e.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=e.displayName?`Hey ${e.displayName}!`:`Hey ${e.email}!`):(K(ie,o=!1,o),console.log("User is NOT signed in"))})});function H(e){const r=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);e==""?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):r?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>A()),emailField.addEventListener("keydown",k=>{k.key==="Enter"&&A()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function W(){const e=new le;Pe(M,e).then(r=>{le.credentialFromResult(r).accessToken,r.user}).catch(r=>{r.code,r.message,r.customData.email,le.credentialFromError(r)})}function C(){let e=emailField.value;console.log(e),e.length!==0&&We(M,e,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",e),console.log("success with sendSignInLinkToEmail!")}).catch(k=>{k.code,k.message,console.log("error with sendSignInLinkToEmail")})}function G(){Ue(M).then(()=>{console.log("logged out"),fe("/")}).catch(e=>{console.log(e),console.log("FAILED firebase signOut function")})}async function q(e){const r=Me(Ce,"email");(await He(r)).forEach(I=>{if(e===I.id){let D=3e3,b=parseInt(D/1e3),O="/";console.log(`A match! ${I.id} => ${O}`),K(he,E=setInterval(()=>{b>0&&(b+=-1,document.getElementById("redirectMessage").innerHTML=` ${b}`)},1e3),E),K(pe,_=setTimeout(()=>{fe(O)},D),_)}})}function A(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",C(),window.addEventListener("keydown",e=>e.stopImmediatePropagation(),!0),window.addEventListener("click",e=>e.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const S=()=>{m==""&&t(1,p=!p)};function z(){m=this.value,t(0,m)}return[m,p,H,W,G,S,z]}class Xe extends we{constructor(l){super(),Ee(this,l,qe,Ge,ve,{})}}export{Xe as default};
