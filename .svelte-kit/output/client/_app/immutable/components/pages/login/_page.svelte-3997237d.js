import{S as we,i as Se,s as ve,k as c,a as y,q as N,l as d,m as w,c as v,r as P,h as u,n as s,p as V,b as _e,G as i,H as j,t as ge,d as Ee,f as ue,C as ke,K as te,o as Ie,M as me,D as Le,I as Fe,J as Te,A as be,g as Be,L as K}from"../../../chunks/index-bd8a2dbd.js";import{r as pe,a as he,i as ie}from"../../../chunks/store-96ddf33d.js";import{e as Re,s as Ae}from"../../../chunks/index-d09807c4.js";import{i as De,s as Oe,o as Me,a as U,G as le,b as Ne,c as Pe,y as Ue,R as He,e as We,d as Ce}from"../../../chunks/firebase-f2065c54.js";import{g as fe}from"../../../chunks/navigation-27ae1c87.js";import"../../../chunks/index-125d1f03.js";import"../../../chunks/singletons-aa147a86.js";function ye(n){let l,t,_,S;return{c(){l=c("input"),this.h()},l(o){l=d(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){s(l,"id","emailField"),s(l,"type","email"),s(l,"placeholder","email"),s(l,"class","svelte-1lkingg")},m(o,m){_e(o,l,m),me(l,n[0]),_||(S=[j(l,"input",n[6]),j(l,"input",function(){Le(n[2](n[0]))&&n[2](n[0]).apply(this,arguments)})],_=!0)},p(o,m){n=o,m&1&&l.value!==n[0]&&me(l,n[0])},i(o){o&&(t||Fe(()=>{t=Te(l,Ae,{duration:500,easing:Re}),t.start()}))},o:be,d(o){o&&u(l),_=!1,ke(S)}}}function Ge(n){let l,t,_,S,o,m,p,H,W,C,G,q,A,E,z,e,r=n[1],k,I,D,b,O,g,R,J,x,M,Q,X,F,Y,Z,T,$,ee,se,h=ye(n);return{c(){l=c("main"),t=c("div"),_=c("br"),S=y(),o=c("br"),m=y(),p=c("button"),H=N("Sign-in with Google"),W=y(),C=c("br"),G=y(),q=c("br"),A=y(),E=c("button"),z=N("Sign-in via link"),e=y(),h.c(),k=y(),I=c("span"),D=y(),b=c("span"),O=y(),g=c("div"),R=c("h2"),J=N("Welcome User"),x=y(),M=c("h3"),Q=N("Redirecting to your page in"),X=y(),F=c("h3"),Y=N("\u230A\u03C0\u230B"),Z=y(),T=c("button"),$=N("Logout"),this.h()},l(f){l=d(f,"MAIN",{});var L=w(l);t=d(L,"DIV",{class:!0,id:!0,style:!0});var a=w(t);_=d(a,"BR",{}),S=v(a),o=d(a,"BR",{}),m=v(a),p=d(a,"BUTTON",{id:!0,class:!0});var ne=w(p);H=P(ne,"Sign-in with Google"),ne.forEach(u),W=v(a),C=d(a,"BR",{}),G=v(a),q=d(a,"BR",{}),A=v(a),E=d(a,"BUTTON",{id:!0,class:!0});var oe=w(E);z=P(oe,"Sign-in via link"),oe.forEach(u),e=v(a),h.l(a),k=v(a),I=d(a,"SPAN",{id:!0,class:!0,style:!0}),w(I).forEach(u),D=v(a),b=d(a,"SPAN",{id:!0,style:!0,class:!0}),w(b).forEach(u),a.forEach(u),O=v(L),g=d(L,"DIV",{class:!0,id:!0,style:!0});var B=w(g);R=d(B,"H2",{class:!0,id:!0});var ae=w(R);J=P(ae,"Welcome User"),ae.forEach(u),x=v(B),M=d(B,"H3",{class:!0});var re=w(M);Q=P(re,"Redirecting to your page in"),re.forEach(u),X=v(B),F=d(B,"H3",{class:!0,style:!0,id:!0});var ce=w(F);Y=P(ce,"\u230A\u03C0\u230B"),ce.forEach(u),Z=v(B),T=d(B,"BUTTON",{id:!0,class:!0});var de=w(T);$=P(de,"Logout"),de.forEach(u),B.forEach(u),L.forEach(u),this.h()},h(){s(p,"id","googleBtn"),s(p,"class","svelte-1lkingg"),s(E,"id","passwordlessLoginBtn"),s(E,"class","svelte-1lkingg"),s(I,"id","emailStatusMessage"),s(I,"class","centering  svelte-1lkingg"),V(I,"display","none"),s(b,"id","flyingEmoji"),V(b,"display","none"),s(b,"class","svelte-1lkingg"),s(t,"class","loginLogoutDivs  svelte-1lkingg"),s(t,"id","logInDiv"),V(t,"display","block"),s(R,"class","centering svelte-1lkingg"),s(R,"id","loginWelcomeText"),s(M,"class","centering svelte-1lkingg"),s(F,"class","centering svelte-1lkingg"),V(F,"font-size","30px"),s(F,"id","redirectMessage"),s(T,"id","logoutBtn"),s(T,"class","svelte-1lkingg"),s(g,"class","loginLogoutDivs svelte-1lkingg"),s(g,"id","logOutDiv"),V(g,"display","none")},m(f,L){_e(f,l,L),i(l,t),i(t,_),i(t,S),i(t,o),i(t,m),i(t,p),i(p,H),i(t,W),i(t,C),i(t,G),i(t,q),i(t,A),i(t,E),i(E,z),i(t,e),h.m(t,null),i(t,k),i(t,I),i(t,D),i(t,b),i(l,O),i(l,g),i(g,R),i(R,J),i(g,x),i(g,M),i(M,Q),i(g,X),i(g,F),i(F,Y),i(g,Z),i(g,T),i(T,$),ee||(se=[j(p,"click",n[3]),j(E,"click",n[5]),j(T,"click",n[4])],ee=!0)},p(f,[L]){L&2&&ve(r,r=f[1])?(Be(),ge(h,1,1,be),Ee(),h=ye(f),h.c(),ue(h,1),h.m(t,k)):h.p(f,L)},i(f){ue(h)},o(f){ge(h)},d(f){f&&u(l),h.d(f),ee=!1,ke(se)}}}function qe(n,l,t){let _,S,o;te(n,pe,e=>t(7,_=e)),te(n,he,e=>t(8,S=e)),te(n,ie,e=>t(9,o=e));let m="",p=!1;Ie(()=>{if(De(U,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),Oe(U,e,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(r=>console.log(r))}Me(U,e=>{e?(K(ie,o=!0,o),console.log("User is signed in!"),q(e.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=e.displayName?`Hey ${e.displayName}!`:`Hey ${e.email}!`):(K(ie,o=!1,o),console.log("User is NOT signed in"))})});function H(e){const r=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);e==""?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):r?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>A()),emailField.addEventListener("keydown",k=>{k.key==="Enter"&&A()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function W(){const e=new le;Ne(U,e).then(r=>{le.credentialFromResult(r).accessToken,r.user}).catch(r=>{r.code,r.message,r.customData.email,le.credentialFromError(r)})}function C(){let e=emailField.value;console.log(e),e.length!==0&&We(U,e,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",e),console.log("success with sendSignInLinkToEmail!")}).catch(k=>{k.code,k.message,console.log("error with sendSignInLinkToEmail")})}function G(){Pe(U).then(()=>{console.log("logged out"),fe("/")}).catch(e=>{console.log(e),console.log("FAILED firebase signOut function")})}async function q(e){const r=Ue(Ce,"email");(await He(r)).forEach(I=>{if(e===I.id){let D=3e3,b=parseInt(D/1e3),O="/";console.log(`A match! ${I.id} => ${O}`),K(he,S=setInterval(()=>{b>0&&(b+=-1,document.getElementById("redirectMessage").innerHTML=` ${b}`)},1e3),S),K(pe,_=setTimeout(()=>{fe(O)},D),_)}})}function A(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",C(),window.addEventListener("keydown",e=>e.stopImmediatePropagation(),!0),window.addEventListener("click",e=>e.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const E=()=>{m==""&&t(1,p=!p)};function z(){m=this.value,t(0,m)}return[m,p,H,W,G,E,z]}class Xe extends we{constructor(l){super(),Se(this,l,qe,Ge,ve,{})}}export{Xe as default};
