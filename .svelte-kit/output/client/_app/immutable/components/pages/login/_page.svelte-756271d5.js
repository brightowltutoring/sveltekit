import{S as be,i as we,s as ve,k as c,a as m,q as A,l as d,m as y,h,c as p,r as M,n,Y as ke,p as u,b as fe,F as t,J as G,t as ue,d as Ee,f as ge,C as ye,o as Se,Z as he,D as Ie,K as Le,L as Fe,A as _e,g as Te}from"../../../chunks/index-1f1b8166.js";import{i as Be,c as De,o as Re,a as W,G as ie,d as Ne,h as Oe,g as me,y as Pe,R as Ue,e as Ae,b as Me,j as We,k as $e}from"../../../chunks/navigation-8bd28da6.js";import"../../../chunks/singletons-4ac5a536.js";function pe(r){let s,l,_,E;return{c(){s=c("input"),this.h()},l(e){s=d(e,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){n(s,"id","emailField"),n(s,"type","email"),n(s,"placeholder","email"),n(s,"class","svelte-174ivch")},m(e,I){fe(e,s,I),he(s,r[0]),_||(E=[G(s,"input",r[6]),G(s,"input",function(){Ie(r[2](r[0]))&&r[2](r[0]).apply(this,arguments)})],_=!0)},p(e,I){r=e,I&1&&s.value!==r[0]&&he(s,r[0])},i(e){e&&(l||Le(()=>{l=Fe(s,Me,{duration:500,easing:Ae}),l.start()}))},o:_e,d(e){e&&h(s),_=!1,ye(E)}}}function Ce(r){let s,l,_,E,e,I,$,C,H,b,q,z,i,o,S,O,w,B,P,le=r[1],V,D,x,R,j,g,N,K,J,U,Y,Z,L,Q,X,F,ee,te,se,v=pe(r);return{c(){s=c("main"),l=c("video"),E=m(),e=c("div"),I=c("br"),$=m(),C=c("br"),H=m(),b=c("button"),q=A("Sign-in with Google"),z=m(),i=c("br"),o=m(),S=c("br"),O=m(),w=c("button"),B=A("Sign-in via link"),P=m(),v.c(),V=m(),D=c("span"),x=m(),R=c("span"),j=m(),g=c("div"),N=c("h2"),K=A("Welcome User"),J=m(),U=c("h3"),Y=A("Redirecting to your page in"),Z=m(),L=c("h3"),Q=A("\u230A\u03C0\u230B"),X=m(),F=c("button"),ee=A("Logout"),this.h()},l(f){s=d(f,"MAIN",{});var k=y(s);l=d(k,"VIDEO",{controlslist:!0,src:!0,style:!0}),y(l).forEach(h),E=p(k),e=d(k,"DIV",{class:!0,id:!0,style:!0});var a=y(e);I=d(a,"BR",{}),$=p(a),C=d(a,"BR",{}),H=p(a),b=d(a,"BUTTON",{id:!0,class:!0});var ne=y(b);q=M(ne,"Sign-in with Google"),ne.forEach(h),z=p(a),i=d(a,"BR",{}),o=p(a),S=d(a,"BR",{}),O=p(a),w=d(a,"BUTTON",{id:!0,class:!0});var oe=y(w);B=M(oe,"Sign-in via link"),oe.forEach(h),P=p(a),v.l(a),V=p(a),D=d(a,"SPAN",{id:!0,class:!0,style:!0}),y(D).forEach(h),x=p(a),R=d(a,"SPAN",{id:!0,style:!0,class:!0}),y(R).forEach(h),a.forEach(h),j=p(k),g=d(k,"DIV",{class:!0,id:!0,style:!0});var T=y(g);N=d(T,"H2",{class:!0,id:!0});var ae=y(N);K=M(ae,"Welcome User"),ae.forEach(h),J=p(T),U=d(T,"H3",{class:!0});var re=y(U);Y=M(re,"Redirecting to your page in"),re.forEach(h),Z=p(T),L=d(T,"H3",{class:!0,style:!0,id:!0});var ce=y(L);Q=M(ce,"\u230A\u03C0\u230B"),ce.forEach(h),X=p(T),F=d(T,"BUTTON",{id:!0,class:!0});var de=y(F);ee=M(de,"Logout"),de.forEach(h),T.forEach(h),k.forEach(h),this.h()},h(){l.autoplay=!0,l.loop=!0,l.muted=!0,l.playsInline=!0,n(l,"controlslist","nodownload"),ke(l.src,_="/login-bg-video-blurred.mp4")||n(l,"src",_),u(l,"min-height","100vh"),u(l,"max-height","100vh"),u(l,"min-width","100vw"),u(l,"max-width","100vw"),u(l,"position","absolute"),u(l,"z-index","-1"),u(l,"top","0"),u(l,"left","0"),u(l,"margin","0"),u(l,"padding","0"),u(l,"filter","blur(10px)"),n(b,"id","googleBtn"),n(b,"class","svelte-174ivch"),n(w,"id","passwordlessLoginBtn"),n(w,"class","svelte-174ivch"),n(D,"id","emailStatusMessage"),n(D,"class","centering  svelte-174ivch"),u(D,"display","none"),n(R,"id","flyingEmoji"),u(R,"display","none"),n(R,"class","svelte-174ivch"),n(e,"class","loginLogoutDivs  svelte-174ivch"),n(e,"id","logInDiv"),u(e,"display","block"),n(N,"class","centering svelte-174ivch"),n(N,"id","loginWelcomeText"),n(U,"class","centering svelte-174ivch"),n(L,"class","centering svelte-174ivch"),u(L,"font-size","30px"),n(L,"id","redirectMessage"),n(F,"id","logoutBtn"),n(F,"class","svelte-174ivch"),n(g,"class","loginLogoutDivs svelte-174ivch"),n(g,"id","logOutDiv"),u(g,"display","none")},m(f,k){fe(f,s,k),t(s,l),t(s,E),t(s,e),t(e,I),t(e,$),t(e,C),t(e,H),t(e,b),t(b,q),t(e,z),t(e,i),t(e,o),t(e,S),t(e,O),t(e,w),t(w,B),t(e,P),v.m(e,null),t(e,V),t(e,D),t(e,x),t(e,R),t(s,j),t(s,g),t(g,N),t(N,K),t(g,J),t(g,U),t(U,Y),t(g,Z),t(g,L),t(L,Q),t(g,X),t(g,F),t(F,ee),te||(se=[G(b,"click",r[3]),G(w,"click",r[5]),G(F,"click",r[4])],te=!0)},p(f,[k]){k&2&&ve(le,le=f[1])?(Te(),ue(v,1,1,_e),Ee(),v=pe(f),v.c(),ge(v,1),v.m(e,V)):v.p(f,k)},i(f){ge(v)},o(f){ue(v)},d(f){f&&h(s),v.d(f),te=!1,ye(se)}}}function He(r,s,l){let _="",E=!1;Se(()=>{if(Be(W,window.location.href)){let i=window.localStorage.getItem("emailForSignIn");i||(i=window.prompt("Please provide your email for confirmation")),De(W,i,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(o=>console.log(o))}Re(W,i=>{i?(console.log("User is signed in!"),H(i.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=i.displayName?`Hey ${i.displayName}!`:`Hey ${i.email}!`):console.log("User is NOT signed in")})});function e(i){const o=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i);i.length===0?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):o?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>b()),emailField.addEventListener("keydown",S=>{S.key==="Enter"&&b()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function I(){const i=new ie;Ne(W,i).then(o=>{ie.credentialFromResult(o).accessToken,o.user}).catch(o=>{o.code,o.message,o.customData.email,ie.credentialFromError(o)})}function $(){let i=emailField.value;console.log(i),i.length!==0&&We(W,i,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",i),console.log("success with sendSignInLinkToEmail!")}).catch(S=>{S.code,S.message,console.log("error with sendSignInLinkToEmail")})}function C(){Oe(W).then(()=>{console.log("logged out"),me("/")}).catch(i=>{console.log(i),console.log("FAILED firebase signOut function")})}async function H(i){const o=Pe($e,"email");(await Ue(o)).forEach(O=>{if(i===O.id){let w=3e3,B=parseInt(w/1e3),P="/";console.log(`A match! ${O.id} => ${P}`),setInterval(()=>{B>0&&(B+=-1,document.getElementById("redirectMessage").innerHTML=` ${B}`)},1e3),setTimeout(()=>{me(P)},w)}})}function b(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",$(),window.addEventListener("keydown",i=>i.stopImmediatePropagation(),!0),window.addEventListener("click",i=>i.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const q=()=>{_.length==0&&l(1,E=!E)};function z(){_=this.value,l(0,_)}return[_,E,e,I,C,q,z]}class Ve extends be{constructor(s){super(),we(this,s,He,Ce,ve,{})}}export{Ve as default};
