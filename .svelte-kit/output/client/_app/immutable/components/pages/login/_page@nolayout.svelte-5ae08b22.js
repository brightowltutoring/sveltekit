import{S as be,i as we,s as fe,k as d,a as h,q as A,l as c,m as v,h as g,c as p,r as M,n as o,Y as ke,p as u,b as ye,F as t,J as G,t as ue,d as Ee,f as me,C as ve,o as Se,Z as ge,D as Ie,K as Le,L as Fe,A as _e,g as Te}from"../../../chunks/index-1f1b8166.js";import{i as Be,c as De,o as Re,a as W,G as le,d as Ne,e as Oe,g as he,y as Pe,R as Ue,b as Ae,h as Me,j as We}from"../../../chunks/navigation-c8bfa025.js";import{e as $e}from"../../../chunks/index-76e8331f.js";import"../../../chunks/singletons-a0d57d8f.js";import"../../../chunks/index-4375fd2f.js";function pe(r){let s,i,_,E;return{c(){s=d("input"),this.h()},l(e){s=c(e,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){o(s,"id","emailField"),o(s,"type","email"),o(s,"placeholder","email"),o(s,"class","svelte-1mhl4m5")},m(e,I){ye(e,s,I),ge(s,r[0]),_||(E=[G(s,"input",r[6]),G(s,"input",function(){Ie(r[2](r[0]))&&r[2](r[0]).apply(this,arguments)})],_=!0)},p(e,I){r=e,I&1&&s.value!==r[0]&&ge(s,r[0])},i(e){e&&(i||Le(()=>{i=Fe(s,Ae,{duration:500,easing:$e}),i.start()}))},o:_e,d(e){e&&g(s),_=!1,ve(E)}}}function Ce(r){let s,i,_,E,e,I,$,C,H,b,q,z,l,n,S,O,w,B,P,ie=r[1],V,D,x,R,j,m,N,K,J,U,Y,Z,L,Q,X,F,ee,te,se,f=pe(r);return{c(){s=d("main"),i=d("video"),E=h(),e=d("div"),I=d("br"),$=h(),C=d("br"),H=h(),b=d("button"),q=A("Sign-in with Google"),z=h(),l=d("br"),n=h(),S=d("br"),O=h(),w=d("button"),B=A("Sign-in via link"),P=h(),f.c(),V=h(),D=d("span"),x=h(),R=d("span"),j=h(),m=d("div"),N=d("h2"),K=A("Welcome User"),J=h(),U=d("h3"),Y=A("Redirecting to your page in"),Z=h(),L=d("h3"),Q=A("\u230A\u03C0\u230B"),X=h(),F=d("button"),ee=A("Logout"),this.h()},l(y){s=c(y,"MAIN",{});var k=v(s);i=c(k,"VIDEO",{controlslist:!0,src:!0,style:!0}),v(i).forEach(g),E=p(k),e=c(k,"DIV",{class:!0,id:!0,style:!0});var a=v(e);I=c(a,"BR",{}),$=p(a),C=c(a,"BR",{}),H=p(a),b=c(a,"BUTTON",{id:!0,class:!0});var oe=v(b);q=M(oe,"Sign-in with Google"),oe.forEach(g),z=p(a),l=c(a,"BR",{}),n=p(a),S=c(a,"BR",{}),O=p(a),w=c(a,"BUTTON",{id:!0,class:!0});var ne=v(w);B=M(ne,"Sign-in via link"),ne.forEach(g),P=p(a),f.l(a),V=p(a),D=c(a,"SPAN",{id:!0,class:!0,style:!0}),v(D).forEach(g),x=p(a),R=c(a,"SPAN",{id:!0,style:!0,class:!0}),v(R).forEach(g),a.forEach(g),j=p(k),m=c(k,"DIV",{class:!0,id:!0,style:!0});var T=v(m);N=c(T,"H2",{class:!0,id:!0});var ae=v(N);K=M(ae,"Welcome User"),ae.forEach(g),J=p(T),U=c(T,"H3",{class:!0});var re=v(U);Y=M(re,"Redirecting to your page in"),re.forEach(g),Z=p(T),L=c(T,"H3",{class:!0,style:!0,id:!0});var de=v(L);Q=M(de,"\u230A\u03C0\u230B"),de.forEach(g),X=p(T),F=c(T,"BUTTON",{id:!0,class:!0});var ce=v(F);ee=M(ce,"Logout"),ce.forEach(g),T.forEach(g),k.forEach(g),this.h()},h(){i.autoplay=!0,i.loop=!0,i.muted=!0,i.playsInline=!0,o(i,"controlslist","nodownload"),ke(i.src,_="/login-bg-video-blurred.mp4")||o(i,"src",_),u(i,"min-height","100vh"),u(i,"max-height","100vh"),u(i,"min-width","100vw"),u(i,"max-width","100vw"),u(i,"position","absolute"),u(i,"z-index","-1"),u(i,"top","0"),u(i,"left","0"),u(i,"margin","0"),u(i,"padding","0"),u(i,"filter","blur(10px)"),o(b,"id","googleBtn"),o(b,"class","svelte-1mhl4m5"),o(w,"id","passwordlessLoginBtn"),o(w,"class","svelte-1mhl4m5"),o(D,"id","emailStatusMessage"),o(D,"class","centering  svelte-1mhl4m5"),u(D,"display","none"),o(R,"id","flyingEmoji"),u(R,"display","none"),o(R,"class","svelte-1mhl4m5"),o(e,"class","loginLogoutDivs svelte-1mhl4m5"),o(e,"id","logInDiv"),u(e,"display","block"),o(N,"class","centering svelte-1mhl4m5"),o(N,"id","loginWelcomeText"),o(U,"class","centering svelte-1mhl4m5"),o(L,"class","centering svelte-1mhl4m5"),u(L,"font-size","30px"),o(L,"id","redirectMessage"),o(F,"id","logoutBtn"),o(F,"class","svelte-1mhl4m5"),o(m,"class","loginLogoutDivs svelte-1mhl4m5"),o(m,"id","logOutDiv"),u(m,"display","none")},m(y,k){ye(y,s,k),t(s,i),t(s,E),t(s,e),t(e,I),t(e,$),t(e,C),t(e,H),t(e,b),t(b,q),t(e,z),t(e,l),t(e,n),t(e,S),t(e,O),t(e,w),t(w,B),t(e,P),f.m(e,null),t(e,V),t(e,D),t(e,x),t(e,R),t(s,j),t(s,m),t(m,N),t(N,K),t(m,J),t(m,U),t(U,Y),t(m,Z),t(m,L),t(L,Q),t(m,X),t(m,F),t(F,ee),te||(se=[G(b,"click",r[3]),G(w,"click",r[5]),G(F,"click",r[4])],te=!0)},p(y,[k]){k&2&&fe(ie,ie=y[1])?(Te(),ue(f,1,1,_e),Ee(),f=pe(y),f.c(),me(f,1),f.m(e,V)):f.p(y,k)},i(y){me(f)},o(y){ue(f)},d(y){y&&g(s),f.d(y),te=!1,ve(se)}}}function He(r,s,i){let _="",E=!1;Se(()=>{if(Be(W,window.location.href)){let l=window.localStorage.getItem("emailForSignIn");l||(l=window.prompt("Please provide your email for confirmation")),De(W,l,window.location.href).then(()=>window.localStorage.removeItem("emailForSignIn")).catch(n=>console.log(n))}Re(W,l=>{l?(console.log("User is signed in!"),H(l.email),logInDiv.style.display="none",logOutDiv.style.display="block",loginWelcomeText.innerText=l.displayName?`Hey ${l.displayName}!`:`Hey ${l.email}!`):console.log("User is NOT signed in")})});function e(l){const n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(l);l.length===0?(emailField.style.border="1px solid #aaa",emailField.style.color="#aaa",emailField.style.fontSize="16px"):n?(emailField.style.border="2px solid #59d0ae",emailField.style.backgroundColor="white",emailField.style.color="#10bb8a",passwordlessLoginBtn.addEventListener("click",()=>b()),emailField.addEventListener("keydown",S=>{S.key==="Enter"&&b()})):(emailField.style.border="1.5px solid red",emailField.style.color="red",emailField.style.fontSize="20px")}function I(){const l=new le;Ne(W,l).then(n=>{le.credentialFromResult(n).accessToken,n.user}).catch(n=>{n.code,n.message,n.customData.email,le.credentialFromError(n)})}function $(){let l=emailField.value;console.log(l),l.length!==0&&Me(W,l,{url:"https://thinksolve.io/login",handleCodeInApp:!0}).then(()=>{window.localStorage.setItem("emailForSignIn",l),console.log("success with sendSignInLinkToEmail!")}).catch(S=>{S.code,S.message,console.log("error with sendSignInLinkToEmail")})}function C(){Oe(W).then(()=>{console.log("logged out"),he("/")}).catch(l=>{console.log(l),console.log("FAILED firebase signOut function")})}async function H(l){const n=Pe(We,"email");(await Ue(n)).forEach(O=>{if(l===O.id){let w=3e3,B=parseInt(w/1e3),P="/";console.log(`A match! ${O.id} => ${P}`),setInterval(()=>{B>0&&(B+=-1,document.getElementById("redirectMessage").innerHTML=` ${B}`)},1e3),setTimeout(()=>{he(P)},w)}})}function b(){passwordlessLoginBtn.style.opacity="0.2",passwordlessLoginBtn.style.pointerEvents="none",$(),window.addEventListener("keydown",l=>l.stopImmediatePropagation(),!0),window.addEventListener("click",l=>l.stopImmediatePropagation(),!0),flyingEmoji.style.display="block",emailStatusMessage.style.display="block",emailStatusMessage.innerHTML=`
                <span class="centering" style=" font-weight: bold; font-size: 18px; color: #10bb8a"> 
                    Link sent to email 
                </span>
                `}const q=()=>{_.length==0&&i(1,E=!E)};function z(){_=this.value,i(0,_)}return[_,E,e,I,C,q,z]}class je extends be{constructor(s){super(),we(this,s,He,Ce,fe,{})}}export{je as default};
