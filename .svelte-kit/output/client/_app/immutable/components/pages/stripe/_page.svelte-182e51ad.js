import{S as w,i as b,s as k,k as m,a as x,$ as C,l as _,m as p,h as o,c as I,a1 as P,n as y,O as S,b as h,f as u,B as g,o as E,q as R,r as T,Q as $,R as U}from"../../../chunks/index-30e2a2cf.js";import{f as B}from"../../../chunks/firebase-800dbd3c.js";import{g as D}from"../../../chunks/public-fe26cbe2.js";import{e as F,f as J}from"../../../chunks/index-36fbeedd.js";function v(l){let s,c,i;return{c(){s=m("div"),c=R("Just a moment"),this.h()},l(t){s=_(t,"DIV",{class:!0});var n=p(s);c=T(n,"Just a moment"),n.forEach(o),this.h()},h(){y(s,"class","font-Poppins text-6xl text-center pt-20 animate-bounce loading svelte-tci3t6")},m(t,n){h(t,s,n),S(s,c)},p(t,n){},i(t){i||$(()=>{i=U(s,J,{y:-400,duration:2e3,easing:F}),i.start()})},o:g,d(t){t&&o(s)}}}function K(l){let s,c,i,t,n=l[0]&&l[1].includes("service")&&l[1].includes("quantity"),e=n&&v();return{c(){s=m("script"),i=x(),t=m("main"),e&&e.c(),this.h()},l(a){const r=C("svelte-qn95fl",document.head);s=_(r,"SCRIPT",{src:!0});var f=p(s);f.forEach(o),r.forEach(o),i=I(a),t=_(a,"MAIN",{});var d=p(t);e&&e.l(d),d.forEach(o),this.h()},h(){document.title="Stripe Firebase Demo",P(s.src,c="https://js.stripe.com/v3/")||y(s,"src",c)},m(a,r){S(document.head,s),h(a,i,r),h(a,t,r),e&&e.m(t,null)},p(a,[r]){r&3&&(n=a[0]&&a[1].includes("service")&&a[1].includes("quantity")),n?e?r&3&&u(e,1):(e=v(),e.c(),u(e,1),e.m(t,null)):e&&(e.d(1),e=null)},i(a){u(e)},o:g,d(a){o(s),a&&o(i),a&&o(t),e&&e.d()}}}function L(l,s,c){let i=!1,t;return E(()=>{c(0,i=!0),c(1,t=window.location.search.slice(1)),window.history.replaceState({},"",`/${btoa(t)}`),n();async function n(){try{const e=new URLSearchParams(t),a=e.get("email"),r=e.get("extra"),f=e.get("service"),d=e.get("quantity");if(f&&d){const{data:q}=await B({email:a,extra:r,service:f,quantity:d});Stripe(D).redirectToCheckout({sessionId:q.id})}}catch(e){console.log("stripeRedirectToCheckout failed",e)}}}),[i,t]}class G extends w{constructor(s){super(),b(this,s,L,K,k,{})}}export{G as default};
