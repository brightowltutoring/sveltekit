import{S as w,i as x,s as P,k as _,a as b,_ as k,l as m,m as p,h as c,c as C,a0 as I,n as y,N as S,b as h,f as u,A as g,o as E,q as R,r as T,P as U,Q as $}from"../../../chunks/index-1063d0c6.js";import{f as A}from"../../../chunks/firebase-ae78a3e0.js";import{S as D}from"../../../chunks/private-53926b58.js";import{e as F,f as J}from"../../../chunks/index-0fa359d1.js";function v(l){let s,o,i;return{c(){s=_("div"),o=R("Just a moment"),this.h()},l(t){s=m(t,"DIV",{class:!0});var n=p(s);o=T(n,"Just a moment"),n.forEach(c),this.h()},h(){y(s,"class","font-Poppins text-6xl text-center pt-20 animate-bounce loading svelte-x181g1")},m(t,n){h(t,s,n),S(s,o)},p(t,n){},i(t){i||U(()=>{i=$(s,J,{y:-400,duration:2e3,easing:F}),i.start()})},o:g,d(t){t&&c(s)}}}function K(l){let s,o,i,t,n=l[0]&&l[1].includes("service")&&l[1].includes("quantity"),e=n&&v();return{c(){s=_("script"),i=b(),t=_("main"),e&&e.c(),this.h()},l(a){const r=k('[data-svelte="svelte-qn95fl"]',document.head);s=m(r,"SCRIPT",{src:!0});var f=p(s);f.forEach(c),r.forEach(c),i=C(a),t=m(a,"MAIN",{});var d=p(t);e&&e.l(d),d.forEach(c),this.h()},h(){document.title="Stripe Firebase Demo",I(s.src,o="https://js.stripe.com/v3/")||y(s,"src",o)},m(a,r){S(document.head,s),h(a,i,r),h(a,t,r),e&&e.m(t,null)},p(a,[r]){r&3&&(n=a[0]&&a[1].includes("service")&&a[1].includes("quantity")),n?e?r&3&&u(e,1):(e=v(),e.c(),u(e,1),e.m(t,null)):e&&(e.d(1),e=null)},i(a){u(e)},o:g,d(a){c(s),a&&c(i),a&&c(t),e&&e.d()}}}function L(l,s,o){let i=!1,t;return E(()=>{o(0,i=!0),o(1,t=window.location.search.slice(1)),window.history.replaceState({},"",`/${btoa(t)}`),n();async function n(){try{const e=new URLSearchParams(t),a=e.get("email"),r=e.get("extra"),f=e.get("service"),d=e.get("quantity");if(f&&d){const{data:q}=await A({email:a,extra:r,service:f,quantity:d});Stripe(D).redirectToCheckout({sessionId:q.id})}}catch(e){console.log("stripeRedirectToCheckout failed",e)}}}),[i,t]}class G extends w{constructor(s){super(),x(this,s,L,K,P,{})}}export{G as default};
