import{c as F,b as I,n as p,l as P}from"./index3.js";import{w as C}from"./index2.js";const T=F((e,o,t,f)=>{let i,{vanilla:s=!1}=o,{once:r=!1}=o,{onview:n=k=>console.log("i ❤️ slots")}=o,{single:a=!1}=o,{root:l=null}=o,{threshold:d=0}=o,{margin:c="0px"}=o;return o.vanilla===void 0&&t.vanilla&&s!==void 0&&t.vanilla(s),o.once===void 0&&t.once&&r!==void 0&&t.once(r),o.onview===void 0&&t.onview&&n!==void 0&&t.onview(n),o.single===void 0&&t.single&&a!==void 0&&t.single(a),o.root===void 0&&t.root&&l!==void 0&&t.root(l),o.threshold===void 0&&t.threshold&&d!==void 0&&t.threshold(d),o.margin===void 0&&t.margin&&c!==void 0&&t.margin(c),`


${s?"":`<div${I("this",i,0)}>${f.default?f.default({}):""}</div>`}`});function A(e){return Object.prototype.toString.call(e)==="[object Date]"}function j(e,o,t,f){if(typeof t=="number"||A(t)){const i=f-t,s=(t-o)/(e.dt||1/60),r=e.opts.stiffness*i,n=e.opts.damping*s,a=(r-n)*e.inv_mass,l=(s+a)*e.dt;return Math.abs(l)<e.opts.precision&&Math.abs(i)<e.opts.precision?f:(e.settled=!1,A(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((i,s)=>j(e,o[s],t[s],f[s]));if(typeof t=="object"){const i={};for(const s in t)i[s]=j(e,o[s],t[s],f[s]);return i}else throw new Error(`Cannot spring ${typeof t} values`)}}function V(e,o={}){const t=C(e),{stiffness:f=.15,damping:i=.8,precision:s=.01}=o;let r,n,a,l=e,d=e,c=1,k=0,w=!1;function M(y,m={}){d=y;const D=a={};return e==null||m.hard||v.stiffness>=1&&v.damping>=1?(w=!0,r=p(),l=y,t.set(e=d),Promise.resolve()):(m.soft&&(k=1/((m.soft===!0?.5:+m.soft)*60),c=0),n||(r=p(),w=!1,n=P(h=>{if(w)return w=!1,n=null,!1;c=Math.min(c+k,1);const g={inv_mass:c,opts:v,settled:!0,dt:(h-r)*60/1e3},E=j(g,l,e,d);return r=h,l=e,t.set(e=E),g.settled&&(n=null),!g.settled})),new Promise(h=>{n.promise.then(()=>{D===a&&h()})}))}const v={set:M,update:(y,m)=>M(y(d,e),m),subscribe:t.subscribe,stiffness:f,damping:i,precision:s};return v}export{T as I,V as s};
